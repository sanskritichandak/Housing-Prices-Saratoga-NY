Model 2 - Logistic Regression

Research Question: To what extent can the probability of a house having central air be predicted using the other home features in Saratoga, NY?
The logistic regression model aims to investigate the relationship between central air and other home features. 
The goal is to predict the probability of a house having central air based on the price, lot size, whether it is located on the waterfront, the age, 
the land value, whether it is newly constructed, the fuel type, heat type, sewer type, the living area, the number of bathrooms, bedrooms, fireplaces, 
and rooms. 

Model without Outliers

Data Management
Logistic regression requires a logical variable as its response variable. Thus, the response variable – central air – is converted to a logical variable. 
In addition, the predictor variables with binary or factor levels must be converted to factors. This includes, Sewer.Type, Fuel.Type, Heat.Type, 
Waterfront, and Newly Constructed. Following which, the outliers were removed using the removeOutliers command based on the z-score method.

Partition the Data
A seed with code 1234 is set to standardize the model results. The data is partitioned using the 70:30 split to create the training and test data set.

Build the Model
The logistic regression model is built using R with Central Air as the response variable and the other variables as the predictor variables.
The output is as follows:

Log(P(New.Construct/1-P(New.Construct)) = -15.067761584810 +0.000003241731 Price -1.173404269351Lot.Size -1.446681163697 waterfornt1 -0.015248758774 Age 
+0.000013613153 Land.Value -1.554191756494 New.Construct 0.670303684255 Fuel.Type2 -0.200728920196 Fuel.Type3 -1.897968243421 Heat.Type2 
-1.547889594694 Heat.Type3 + 13.742864093732 Sewer.Type2 + 13.939368747856 Sewer.Type3 +0.000407733923 Living.Area - 0.385811298057 Bedrooms 
-0.783986218028 Fireplaces + 0.648424692743 Bathrooms -0.064040714055 Rooms.

Given that many of the predictor variables are not statistically significant, the model is improved using the stepwise regression method. 
The backward stepwise regression is conducted to eliminate predictor variables that are not statistically significant and obtain a model with the 
lowest AIC value.
The equation generated using this model is:

Log(P(Central.Air/1-P(Central.Air)) = -1.211038615806  +0.000003770712 Price-1.376033335893 Lot.Size -1.616448175516 waterfront1 -0.016748925255 Age 
+0.000015123563 Land.Value -1.513974212663 New.Construct1 -1.850417474184 Heat.Type2 -0.860718047932 Heat.Type3 -0.372845905209  Bedrooms 
+0.829865094334  Fireplaces +0.725971623473 Bathrooms

The backward stepwise regression removed Fuel Type, Sewer Type, Living Area, and Rooms. 
The odds are depicted as the probability of a house having central air compared to the probability of a house not having central air. 
Taking the logarithm of the odds results in the logit function.

Predictions and Evaluations
The predictions are generated using a threshold of 0.5. As a result, when the value of the prediction is greater than 50%, the output is TRUE.
The model is first evaluated using the error rate. The model has an error rate of 25.4%. 
The benchmark error rate is 38.7%. Since the model error rate is lower than the benchmark error rate, 
it suggests that the model without outliers is better than not having any model.

                          Actuals 
                          False       True
           False          252         82
  PredTF  
           True           38          101
         
Specificivity: 55.20%
Sensitivity: 86.90%

Figure 5					  
Confusion Matrix (without outliers), Sensitivity and Specificity table (without outliers)   

The above table shows the number of false positives and false negatives. 
A false positive is a when house is predicted to have a central air but in reality, it does not. There are 38 false positives. 
A false negative is when a house is predicted to not have central air when in reality, it does. There are 82 false negatives. 
The sensitivity of the model is 55.2%, which indicates that the model correctly identifies houses with central air 55.2% of the time. 
The model is averagely sensitive to houses with central air. The specificity is 86.9%, which means that the model is able to identify a 
house without a central air 86.9% of the time. This means that the model can specifically distinguish between houses with and without the central air. 
The logistic regression model can also be evaluated using the ROC and Lift chart. Below is the ROC chart for the model without outliers. 
The ROC chart reflects the trade-off between sensitivity and specificity. The AUC is 0.8 which is close to the ideal value of 1. 
Thus, the AUC of the model is closer to the idea case than the benchmark.




                          
                          


    

